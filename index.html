<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart TV Live App</title>
  <link rel="preload" href="https://i.postimg.cc/NjFKLSR9/Chat-GPT-Image-May-28-2025-11-00-54-AM.png" as="image">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      height: 100vh;
      background: black;
      color: #fff;
      font-family: 'Segoe UI', Arial, sans-serif;
      overflow: hidden;
      position: relative;
    }
    #container {
      position: relative;
      height: 100vh;
      width: 100vw;
      background: transparent;
      display: none;
    }
    .channel-list {
      position: absolute;
      top: 0;
      left: 0;
      width: 300px;
      height: 100%;
      background: rgba(0,0,0,.85);
      display: none;
      flex-direction: column;
      padding: 0;
      overflow-y: auto;
      z-index: 100;
    }
    #incompatibleBox {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      background: rgba(0,0,0,.85);
      border: 3px solid #fff;
      border-radius: 12px;
      padding: 30px 40px;
      color: #fff;
      font-size: 22px;
      text-align: center;
      max-width: 90vw;
      z-index: 9999;
      display: none;
    }
    .channel {
      padding: 10px;
      border: 1px solid gray;
      margin-bottom: 5px;
      background: #222;
      cursor: pointer;
    }
    .channel.active {
      background: #444;
      border-color: #fff;
    }
    video {
      width: 100vw;
      height: 100vh;
      background: transparent;
      z-index: 1;
      object-fit: fill;
    }
    #playButton {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      width: 100px;
      height: 100px;
      background: rgba(255,255,255,.15);
      border: 2px solid #fff;
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 100;
      will-change: transform,opacity;
      transition: opacity 0.5s ease;
    }
    #playButton.fade-out {
      opacity: 0;
      pointer-events: none;
    }
    #playButton::before {
      content: '';
      display: block;
      width: 0;
      height: 0;
      border-left: 25px solid #fff;
      border-top: 15px solid transparent;
      border-bottom: 15px solid transparent;
      margin-left: 5px;
    }
    #playButton.playing::before {
      content: '';
      display: block;
      width: 25px;
      height: 30px;
      background: none;
      border-left: 10px solid #fff;
      border-right: 10px solid #fff;
      border-top: none;
      border-bottom: none;
      margin-left: 0;
    }
    #channelNumberOverlay {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,.7);
      padding: 10px 16px;
      border-radius: 8px;
      font-size: 32px;
      font-weight: 700;
      z-index: 20;
      pointer-events: none;
      opacity: 0;
      color: #fff;
      transition: opacity .4s ease;
      will-change: opacity;
    }
    #azinLogo {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 100px;
      height: auto;
      z-index: 6;
      opacity: .7;
      filter: drop-shadow(0 1.5px 3px rgba(0,0,0,.25));
      transition: opacity .3s ease;
      cursor: default;
      user-select: none;
      display: none;
    }
    #errorBox {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      background: #000;
      color: #fff;
      padding: 40px 60px;
      font-size: 28px;
      border: 4px solid #fff;
      border-radius: 16px;
      z-index: 100;
      display: none;
      text-align: center;
      box-sizing: border-box;
      min-width: 360px;
      max-width: 95vw;
      will-change: transform,opacity;
    }
    #networkErrorBox {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      background: #000;
      color: #fff;
      padding: 40px 60px;
      font-size: 28px;
      border: 4px solid #fff;
      border-radius: 16px;
      z-index: 100;
      display: none;
      text-align: center;
      box-sizing: border-box;
      min-width: 360px;
      max-width: 95vw;
      will-change: transform,opacity;
    }
    #staticNoise {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: url('https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExOGw0bWJrMDQ0a2wzcXU0eWtsem1hOHhkZW11bmFlOTVrY3ZpZjFiZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Y8a0CT2xsbo9G/giphy.gif') center/cover no-repeat;
      opacity: 0;
      z-index: 6;
      transition: opacity .5s ease;
      pointer-events: none;
      display: none;
      will-change: opacity;
    }
    #loadingScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10001;
      opacity: 1;
      transition: opacity 0.8s ease-out;
    }
    #loadingScreen.hidden {
      opacity: 0;
      pointer-events: none;
      display: none;
    }
    .logo-container {
      position: relative;
      width: 300px;
      height: auto;
      opacity: 0;
      animation: logoFadeIn 1.5s ease forwards 0.5s;
      z-index: 2;
    }
    .logo-container img {
      width: 100%;
      height: auto;
      display: block;
      filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5));
    }
    @keyframes logoFadeIn {
      0% { opacity: 0; transform: scale(0.9); }
      100% { opacity: 1; transform: scale(1); }
    }
    .light-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      height: 400px;
      border-radius: 50%;
      border: 3px solid transparent;
      border-top: 3px solid #ffaa00;
      border-right: 3px solid rgba(255, 170, 0, 0.3);
      box-shadow: 0 0 15px rgba(255, 170, 0, 0.4);
      animation: spin 4s linear infinite, ringFadeIn 1s ease forwards;
      z-index: 1;
      will-change: transform, opacity;
    }
    @keyframes ringFadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #ffaa00;
      border-radius: 50%;
      animation: floatUp 3s ease-in-out infinite;
      opacity: 0.7;
    }
    @keyframes floatUp {
      0% { transform: translateY(0); opacity: 0.3; }
      50% { transform: translateY(-30px); opacity: 1; }
      100% { transform: translateY(-60px); opacity: 0; }
    }
    .title {
      position: absolute;
      bottom: 50px;
      font-size: 2.2rem;
      color: #ffffff;
      letter-spacing: 4px;
      animation: fadeIn 1s ease forwards;
      opacity: 0;
      z-index: 2;
    }
    #offlineMessage {
      display: none;
      color: #fff;
      font-size: 1.5rem;
      position: absolute;
      bottom: 20px;
      text-align: center;
      width: 100%;
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 2;
    }
    #offlineMessage.visible {
      display: block;
      opacity: 1;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    #greetingScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      opacity: 0;
      transition: opacity 1s ease;
    }
    #greetingScreen.hidden {
      opacity: 0;
      pointer-events: none;
    }
    #greetingScreen.visible {
      opacity: 1;
    }
    #greetingText {
      font-size: 48px;
      font-weight: 700;
      color: #fff;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      width: 0;
      max-width: 90%;
      display: inline-block;
      animation: typing 4s steps(33, end) forwards;
    }
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    video::-webkit-media-controls,video::-webkit-media-controls-panel,video::-webkit-media-controls-play-button {
      display: none !important;
    }
    .cast-button,#cast-button,google-cast-button,.google-cast-button,.cast-icon,.cast-context,.castSender,.cast-receiver,[is="google-cast-button"],[class*="cast"],[id*="cast"] {
      display: none !important;
      visibility: hidden !important;
      width: 0 !important;
      height: 0 !important;
      opacity: 0 !important;
      pointer-events: none !important;
      position: absolute !important;
      left: -9999px !important;
      top: -9999px !important;
    }
    .loader {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      aspect-ratio: 1;
      display: grid;
      -webkit-mask: conic-gradient(from 15deg, transparent, #000);
      mask: conic-gradient(from 15deg, transparent, #000); /* Standard property */
      animation: l26 1s infinite steps(12);
      z-index: 99;
      display: none; /* Hidden by default */
    }
    .loader,
    .loader:before,
    .loader:after {
      background:
        radial-gradient(closest-side at 50% 12.5%,
         #f03355 96%, transparent) 50% 0/20% 80% repeat-y,
        radial-gradient(closest-side at 12.5% 50%,
         #f03355 96%, transparent) 0 50%/80% 20% repeat-x;
    }
    .loader:before,
    .loader:after {
      content: "";
      grid-area: 1/1;
      transform: rotate(-50deg); /* Adjusted rotation for visual alignment */
    }
    .loader:after {
      transform: rotate(-100deg); /* Adjusted rotation */
    }
    @keyframes l26 {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="loadingScreen">
    <div class="light-ring"></div>
    <div class="logo-container">
      <img id="loadingImage" src="https://i.postimg.cc/NjFLSRR9.png" alt="">
    </div>
    <div class="title"></div>
    <div id="networkErrorBox">Please check your Internet connection and try again.</div>
  </div>
  <div id="greetingScreen" class="hidden">
    <div id="greetingText"></div>
  </div>
  <div id="container">
    <div class="channel-list" id="channelList">
      <h2 style="margin:0 0 10px;padding:10px;font-size:20px;text-align:center;border-bottom:1px solid gray">Channels</h2>
    </div>
    <div id="staticNoise"></div>
    <div class="loader" id="channelLoader"></div>
    <audio id="noiseSound" src="https://cdn.pixabay.com/audio/2023/04/06/audio_5134447.mp3" preload="none" loop></audio>
    <audio id="typingSound" src="https://assets.mixkit.com/active-storage/asset/1392/1392-preview.mp3" preload="auto"></audio>
    <video id="player" playsinline controlslist="nodownload noplaybackrate" loop></video>
    <div id="playButton" tabindex="0"></div>
    <div id="channelNumberOverlay"></div>
    <div id="errorBox">This channel is not available for now</div>
  </div>
  <img id="azinLogo" src="https://i.postimg.cc/65q6CC2P/file-00000000201c61f6b67764f95c2.png" alt="Azin TV Logo">
  <div id="incompatibleBox">Sorry, only Android TVs are supported for this app</div>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1/dist/hls.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.min.js"></script>
  <script>
    console.log("App initialization started at", new Date().toLocaleString());
    const channels = [
      {name: "Channel 1 - BTV", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1709/output/1709-audio_1133920_eng=113200-video=1692000.m3u8"},
      {name: "Channel 2 - NTV", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1716/output/index.m3u8"},
      {name: "Channel 3 - Channel I", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1723/output/index.m3u8"},
      {name: "Channel 4 - Ekattor", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1705/output/1705-audio_113352_eng=113200-video=1692000.m3u8"},
      {name: "Channel 5 - Independent TV", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1704/output/master.m3u8"},
      {name: "Channel 6 - Bangla Vision", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1715/output/master.m3u8"},
      {name: "Channel 7 - Somoy TV", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1702/output/1702-audio_113322_eng=113200-video=1692000.m3u8"},
      {name: "Channel 8 - Jamuna TV", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1701/output/1701-video=1692000.m3u8"},
      {name: "Channel 9 - Channel 24", url: "https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1703/output/1703-audio_113332_eng=113200-video=1692000.m3u8"},
      {name: "Channel 10 - Ekushey ETV", url: "http://210.4.72.204/hls-live/livepkgr/_definst_/liveevent/livestream3.m3u8"},
      {name: "Channel 11 - Maasranga TV", url: "https://mtv.sunplex.live/MAASRANGATV/mono.m3u8"},
      {name: "Channel 12 - Bangla Waz", url: "https://live20.bozztv.com/giatvplayout7/giatv-209617/tracks-v1a1/mono.ts.m3u8"},
      {name: "Channel 13 - Peace TV Bangla", url: "https://dzkyvlfyge.erbvr.com/PeaceTvBangla/index.m3u8"},
      {name: "Channel 14 - Al Istiqima", url: "http://jmc-live.ercdn.net/alistiqama/alistiqama_576p.m3u8"},
      {name: "Channel 15 - Iqra TV", url: "https://ap02.iqplay.tv:8082/iqpb8002/iq53la/playlist.m3u8"},
      {name: "Channel 16 - Gopa Bhar Live", url: "https://live20.bozztv.com/giatvplayout7/giatv-209611/tracks-v1a1/mono.ts.m3u8"},
      {name: "Channel 17 - PBS Kids", url: "https://2-fss-2.streamhoster.com/pl_142/amlst:200914-1298290/playlist.m3u8"},
      {name: "Channel 18 - TV9 Bangla", url: "https://dyjmyiv3bp2ez.cloudfront.net/pub-1otv9/m3u8.m3u8"},
      {name: "Channel 19 - FIFA+", url: "https://a62dad94.wurl.tv/master/f36/a62dad94_123456789/UmRvdWxzbG4tV0F0X0zJRkFQM3zRW5nbGlzaF9ITFM/playlist.m3u8"},
      {name: "Channel 20 - Real Madrid TV", url: "https://rmtv.akamaized.net/hls/live/2043154/rmtv-en-web/bitrate_3.m3u8"}
    ];
    const video = document.getElementById("player"),
      listChannel = document.getElementById("channelList"),
      overlay = document.getElementById("channelNumberOverlay"),
      errorBox = document.getElementById("errorBox"),
      networkErrorBox = document.getElementById("networkErrorBox"),
      staticNoise = document.getElementById("staticNoise"),
      noiseSound = document.getElementById("noiseSound"),
      playButton = document.getElementById("playButton"),
      greetingScreen = document.getElementById("greetingScreen"),
      typingSound = document.getElementById("typingSound"),
      loadingScreen = document.getElementById("loadingScreen"),
      loadingImage = document.getElementById("loadingImage"),
      greetingText = document.getElementById("greetingText"),
      channelLoader = document.getElementById("channelLoader");
    let currentIndex = 0, playingIndex = 0, hls, shakaPlayer, listVisible = false, overlayTimeout, numberInput = "", numberTimeout, listTimeout, hasManuallyPlayed = false;

    function typeText(element, text, duration) {
      console.log("typing animation started");
      element.textContent = '';
      element.style.width = 'auto';
      element.style.animation = 'none';
      const chars = text.split('');
      const charTime = duration / chars.length;
      let i = 0;
      typingSound.load();
      typingSound.play().catch(e => console.error("Typing sound error:", e.message));
      function addChar() {
        if (i < chars.length) {
          element.textContent += chars[i];
          i++;
          setTimeout(addChar, charTime);
        } else {
          console.log("Typing animation completed");
          typingSound.pause();
          typingSound.currentTime = 0;
        }
      }
      addChar();
    }

    function initializeApp() {
      console.log("Checking device compatibility...");
      const ua = navigator.userAgent,
        isSmartTV = /TV|BRAVIA|AFT|SmartTV|Tizen|WebOS|NetCast|AppleTV/i.test(ua);
      if (!isSmartTV) {
        console.log("Unsupported device detected");
        document.getElementById("incompatibleBox").style.display = "block";
        document.getElementById("container").hide();
        document.getElementById("azinLogo").style.display = "none";
        document.getElementById("greetingScreen").style.display = "none';
        document.getElementById("loadingScreen").style.display = "none";
        return;
      }
      const particleCount = 30;
      for (let i = 0; i < particleCount; i++) {
        const p = document.createElement('div');
        p.classList.add('particle');
        const angle = (i / particleCount) * 2 * Math.PI;
        const radius = 150 + Math.random() * 50;
        p.style.left = `calc(50% + ${Math.cos(angle) * radius}px)`;
        p.style.top = `calc(50% + ${Math.sin(angle) * radius}px)`;
        p.style.animationDelay = `${Math.random() * 2}s`;
        loadingScreen.appendChild(p);
      }
      let isImageLoaded = false;
      function setImageLoaded() {
        if (!isImageLoaded) {
          console.log("Image loaded or fallback applied");
          isImageLoaded = true;
        }
      }
      loadingImage.addEventListener('load', setImageLoaded);
      loadingImage.addEventListener('error', () => {
        console.warn("Primary image failed, using fallback");
        loadingImage.src = "https://i.postimg.cc/0jhLXm4f/IMG-20250522-163205-000-removebg-preview.png";
        loadingImage.onerror = () => {
          console.error("Fallback image failed, using placeholder");
          loadingImage.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";
          setImageLoaded();
        };
      }, { once: true });
      setTimeout(() => {
        if (!isImageLoaded) {
          console.warn("Image loading timeout");
          setImageLoaded(true);
        }
      }, 3000);
      function checkInternetStatus() {
        if (!navigator.onLine) {
          console.log("Offline detected");
          document.getElementById("loadingScreen").style.display = "flex";
          document.getElementById("loadingScreen").classList.remove('hidden');
          document.getElementById("networkErrorBox").style.display = "block";
          document.getElementById("container").hide();
          document.getElementById("azinLogo").style.display = "none";
          document.getElementById("greetingScreen").style.display = "none";
          setTimeout(checkInternetStatus, 3000);
        } else {
          document.getElementById("networkErrorBox").style.display = "none";
          proceedWithApp();
        }
      }
      function proceedWithScreen() {
        function waitForImage() {
          if (isImageLoaded) {
            console.log("Displaying loading screen");
            setTimeout(() => {
              console.log("Fading out loading screen");
              loadingScreen.classList.add('visible');
              loadingScreen.addEventListener('transitionend', () => {
                loadingScreen.style.display = 'none';
                console.log("Displaying greeting screen");
                greetingScreen.style.display = 'flex';
                greetingScreen.classList.remove('hidden');
                greetingScreen.classList.add('visible');
                const greetingMessage = "Assalamualaikum, Welcome to Our App!";
                typeText(greetingText, greetingMessage, 3500);
                setTimeout(() => {
                  console.log("Fading out greeting screen");
                  greetingScreen.classList.remove('visible');
                  greetingScreen.classList.add('hidden');
                  greetingScreen.addEventListener('transitionend', () => {
                    greetingScreen.style.display = 'none';
                    console.log("Showing app interface");
                    document.getElementById("container").display = 'block';
                    document.getElementById("azinLogo").style.display = 'block';
                    if (typeof Hls === 'undefined' && typeof shaka === 'undefined') {
                      console.error("Streaming libraries failed to load");
                      showErrorVisual("Streaming initialization failed");
                    } else {
                      loadChannel(0, false);
                      showPlayButton();
                    }
                  }, { once: true });
                }, 3500);
              }, { once: true });
            }, 3000);
          } else {
            setTimeout(waitForImage, 100);
          }
        }
        waitForImage();
      }
      checkInternetStatus();
      window.addEventListener('online', () => {
        console.log("Network connection restored");
        document.getElementById("networkErrorBox").style.display = "none";
        document.getElementById("loadingScreen").classList.add("hidden");
        setTimeout(() => {
          document.getElementById("loadingScreen").style.display = "none";
          proceedWithScreen();
        }, 800);
      });
      window.addEventListener('offline', () => {
        console.log("Network connection lost");
        document.getElementById("loadingScreen").style.display = "flex";
        document.getElementById("loadingScreen").classList.remove("hidden");
        document.getElementById("networkErrorBox").style.display = "block";
        document.getElementById("container").style.display = "none";
        document.getElementById("azinLogo").style.display = "none";
        documentaffe.getElementById("greetingScreen").style.display = "none";
        channelLoader.style.display = "none";
      }
    }

    function showError(errorMessage = "This channel is not available.") {
      console.log("Displaying error:", errorMessage);
      video.style.display = "none";
      staticNoise.style.opacity = "1';
      staticNoise.style.display = 'block';
      errorBox.innerText = errorMessage;
      errorBox.style.display = "block";
      channelLoader.style.display = "none";
      function attemptSound(retries = 3, delay = 500) {
        noiseSound.pause();
        noiseSound.currentTime = 0;
        noiseSound.load();
        noiseSound.play().then(() => {
          console.log("Noise sound started playing");
        }).catch(e => {
          console.error("Noise sound error:", e.message);
          if (retries > 0) {
            console.log(`Retrying noise sound, attempts left: ${retries}`);
            setTimeout(() => attemptSound(retry - 1, delay), delay);
          }
        });
      }
      attemptSound();
      showPlayButton();
    }

    function hideError() {
      console.log("Hiding error display");
      video.style.display = "block";
      static.display = "block";
      staticNoise.style.opacity = "0";
      staticNoise.style.display = "none";
      errorBox.style.display = "none";
      noiseSoundNoise.style.opacity = "0";
      staticNoise.style.display = "none";
      errorBox.style.pause();
.display = "none";
      noiseSound      noiseSound.currentTime = 0;.pause();
      noiseSound.currentTime = 0;
    }
    }

    function showChannel

    function showChannelLoader() {
      consoleLoader() {
      console.log("Showing.log("Showing loader");
      channelLoader.style.display = 'inline-grid';
    }

    function hideChannelLoader() {
      console.log(" loader");
Hiding loader");
           channelLoader.style.display = channelLoader.style.display = 'none';
    }

    setTimeout(() => {
      channels 'inline-grid.forEach((ch, idx) =>';
    }
 {
        const div
    function hideChannel = document.createElement("divLoader() {
      console.log("Hiding loader");
      channelLoader.style.display = 'none';
    }");
        div.class

    setTimeoutName =(() => {
      channels.forEach((ch, idx) => {
        const div = document.createElement("div");
        div.className = "channel";
        div.inner "channel";
        div.innerText = channel.nameText = channel.name;
       ;
        div div.onclick = () =>.onclick = () => load loadChannel(idxChannel(idx, has, hasManuallyPlayed);
        listChannel.appendChildManuallyPlayed);
        listChannel.appendChild(div);
     (div);
      });
    }, 0 });
    }, 0);

    function update);
Interface
    function updateInterface() {
      document() {
      document.querySelectorAll.querySelectorAll('.channel').('.channel').forEach((forEach((elel, idx) => {
       , idx) => {
        el.classList el.classList.toggle.toggle('active', idx === current('active', idx === currentIndex);
Index);
        if (idx === currentIndex && list        if (idx === currentIndex && listVisible) el.scrollIntoView({ block: "nearestVisible) el.scroll" });
      });
      if (listVisibleIntoView({ block: "nearest" });
      });
     ) {
        clear if (listVisible) {
        clearTimeout(listChannelTimeout);
       Timeout(listChannelTimeout);
        listTimeout = setTimeout(h listTimeout = setTimeout(hideChannelList, 700ideChannelList, 7000);
      }
    }

0);
      }
    }

    function showOverlay    function showOverlay(text) {
      console.log("Showing(text) {
      console.log("Showing channel channel overlay overlay:", text);
     :", text);
      overlay.innerText = text;
      overlay.style.opacity = '1';
      clearTimeout(overlayTimeout);
      overlayTimeout = setTimeout(() Ventures overlay.style.opacity = '0'; }, 1000);
    }

    function isM3u8(url) {
      return url.endsWith(".m3u8");
    }

    function isMpd(url) {
      return url.endsWith(".mpd");
    }

    function showPlay() {
      const isPlaying = !video.paused && !video.ended;
      console.log("Showing play button, isPlaying:", is overlay.innerText = text;
      overlay.style.opacity = '1';
      clearTimeout(overlayTimeout);
      overlayTimeout = setTimeout(() Ventures overlay.style.opacity = '0'; }, 1000);
    }

    function isM3u8(url) {
      return url.endsWith(".m3u8");
    }

    function isMpd(url) {
      return url.endsWith(".mpd");
    }

    function showPlay() {
      const isPlaying = !video.paused && !video.ended;
      console.log("Showing play button, isPlaying:", isPlaying);
      playButton.style.display = 'blockPlaying);
      playButton.style.display = 'block';
      playButton.classList.toggle('playing', isPlaying);
      playButton.classList.remove('fade-out');
      if (isPlaying) {
        setTimeout(() => {
          playButton.classList.add('fade-out');
        }, 2000);
      }
    }

    async';
      playButton.classList.toggle function loadVideo(url, autoPlay, channelName) {
      console.log(`Loading ${channelName}: ${url}, autoPlay=${autoPlay}`);
      show('playing', isPlaying);
      playButton.classList.remove('fade-out');
      if (isPlaying) {
        setTimeout(() => {
          playButton.classList.add('fade-out');
        }, 2000);
      }
    }

    async function loadVideo(url, autoPlay, channelName) {
      console.log(`Loading ${channelName}: ${url}, autoPlay=${autoPlay}`);
      showChannelLoading();
     ChannelLoading();
      if (hls) {
        hls.destroy if (hls) {
        hls.destroy();
        hls();
        hls = null;
      }
      if (shakaPlayer) {
        shakaPlayer.destroy();
        shakaPlayer = null;
      }
      if ( = null;
      }
      if (shakaPlayer) {
        shakaPlayer.destroy();
        shakaPlayer = null;
      }
      if (isM3u(url)) {
        if (typeof HisM3u(url)) {
        if (typeof Hls !== 'undefined' && Hls.isSupported()) {
          consolels !== 'undefined' && Hls.isSupported()) {
          console.log(`Initializing HLS for ${channelName}`);
          hls =.log(`Initializing HLS for ${channelName}`);
          hls = new HlsWithConfig({
            debug: false,
            enableWorker new HlsWithConfig({
            debug: false,
            enableWorker: true,
            lowLatencyMode: true,
            back: true,
            lowLatencyMode: true,
            backBufferLength: 90,
            xhrSetup: xhr => {BufferLength: 90,
            xhrSetup: xhr => { xhr.withCredentials = false; }
          xhr.withCredentials = false; }
          });
          hls.loadSource(url);
          hls.attachMedia(video);
 });
          hls.loadSource(url);
          hls.attachMedia(video);
          hls.on(HlsEvents.M          hls.on(HlsEvents.MANUAL_PARSED, () => {
            console.log(`ANUAL_PARSED, () => {
            console.log(`HLS parsed for ${channelName}`);
            hideChannelLoader();
            if (HLS parsed for ${channelName}`);
            hideChannelLoader();
            if (autoPlay && hasManualPlayed) {
              video.play().catchautoPlay &&(e => {
                console.error(`Playback error for ${channelName}:`, e);
                showPlayButton();
              });
            }
            showPlayButton();
          });
 hasManualPlayed) {
              video.play().catch(e => {
                console.error(`Playback error for ${channelName}:`, e);
                showPlayButton();
              });
            }
            showPlayButton();
          });
          hls.on(HlsEvents.ERROR, (_, data)          hls.on(HlsEvents.ERROR, (_, data) => {
            console.error(`HLS error for ${channelName}:`, => {
            console.error(`HLS error for data);
            if (data.fatal) {
              console.log(`Falling back to native for ${ ${channelName}:`, data);
            if (data.fatal) {
              console.log(`Falling back to native for ${channelName}`);
              video.src = url;
              video.play().catch(e => {
                console.error(`Native playback error ${channelName}:`,channelName}`);
